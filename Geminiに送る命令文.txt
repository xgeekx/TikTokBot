TIKTOKから情報を収集するbotをpythonで作っている。
ホストマシンであるWindows11でAppiumサーバーを起動する
ホストマシンの中にあるVirtualBoxの仮想マシンのUbuntuでPythonを実行して、Appiumを使ってAndroidを操作する

主に３つのBOTがある
・収集bot
・スクショチェックbot
・翻訳bot

▼収集bot：
①オススメを１秒ごとくらいにスワイプして情報を収集する
対象の情報：スクショ、イイネ数、動画URL、チャンネル名、投稿文章
ただしテーブル上に設定したしきい値より低いイイネ数のものは無視
②オプティマイズ
オススメに出てきてほしい動画は、オススメをスクロールするほど弱まり、在日外国人の迷惑動画などを探したいのに日本人の動画ばかりになってくる。
よって、たまに検索をして100件くらいスクロールして、オススメ動画と同様に情報を収集していく
スクショはMySQLのカラムに保存する

▼スクショチェックbot
SeleniumでGeminiとやり取りし、10個の動画情報を渡す。
スクショは最大10枚までGeminiに送れるため。
外国人の万引き行為や、日本への不満や、色んなものを対象に「要確認」「確認不要」「不明」に分類する

▼翻訳BOT
SeleniumでGeminiとやり取りし、「要確認」「不明」のステータスの動画を対象に１つずつ動画をGeminiに渡して翻訳を行う。
10分以上の動画は除外、そもそもダウンロード不要


それぞれのbotの台数は柔軟に増やせるようにする
こまめに各処理の前にloggerでログ出力することで、お前にログを送ったらすぐに状況を把握できるようにすること。

▼その他の機能
DBに残ったゴミを定期的に削除する機能
など

とりあえず現在は収集botの機能①を作成している

現在は、収集BOTのオプティマイズ処理を作っている。
収集BOTの①は完了しているので、一旦コメントアウトしているが絶対に消すな。
まずはこの処理のコメントアウトをもとに戻して実行するようにしなさい。
また、オプティマイズ処理もほとんどできてる。
オプティマイズ処理は、現在検索後にフィルターかけて動画を開くところまでできた。
つまりあとは実装済みの処理、process_single_videoを呼び出せばいいくらいだ。
テスト用にオススメ情報は2件収集して終了、オプティマイズでの検索結果は2件収集するようにしてみてくれる？
一連の流れがうまく動作するかを見たい。
また、設計では最も過去に検索したワードを持ってきてオプティマイズを１回だけするようにしてるんだけどどうなってる？
つまりオプティマイズ処理が呼び出されるたびに、サーチワードに紐づく動画をスワイプしてみて情報収集をしていく。
この、俺が好みである動画に対してスワイプ処理をしていくことで、オススメ動画も最適化されるということだ。
これを定期的に行うことで、オススメの劣化を防ぐ。
無駄なソースは出力しなくていい。なぜならあれこれを出力すると落ちるからね。
変更した関数だけ出力するか、最低限のファイルのみ更新しなさい。